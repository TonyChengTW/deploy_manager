#Generated by Kickstart Configurator
#platform=AMD64 or Intel EM64T

#System language
lang en_US.UTF-8
#Language modules to install
langsupport en_US.UTF-8
#System keyboard
keyboard us
#System mouse
mouse
#System timezone
timezone
#Root password
rootpw --iscrypted $1$kgswqRWr$GlzqIcMerCp0QCsxXekzx0
#Initial user
user queens --fullname "queens" --iscrypted --password $1$KjwbDXDz$.2bZr7oBaDpuNiVDLuIrb1
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use Web installation
url --url http://192.168.178.178/u18.04.1-server-amd64/ubuntu/
#System bootloader configuration
bootloader --location=mbr
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel
#Disk partitioning information
part /boot --fstype ext4 --size 400 --asprimary
part / --fstype ext4 --size 1 --grow
#part swap --recommended
part swap --size 8192
#System authorization infomation
auth  --useshadow  --enablemd5
#Network information
network --bootproto=dhcp --device=eth0
#Firewall configuration
firewall --disabled
#Do not configure the X Window System
skipx

%packages
ubuntu-minimal
openssh-server

%post
(
cat <<'EOP'
# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to
# newer versions of the distribution.
deb [arch=amd64] http://192.168.178.178/ubuntu bionic main restricted
# deb-src http://192.168.178.178/ubuntu bionic main restricted

## Major bug fix updates produced after the final release of the
## distribution.
deb [arch=amd64] http://192.168.178.178/ubuntu bionic-updates main restricted
# deb-src http://192.168.178.178/ubuntu bionic-updates main restricted

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu
## team. Also, please note that software in universe WILL NOT receive any
## review or updates from the Ubuntu security team.
deb [arch=amd64] http://192.168.178.178/ubuntu bionic universe
# deb-src http://192.168.178.178/ubuntu bionic universe
deb [arch=amd64] http://192.168.178.178/ubuntu bionic-updates universe
# deb-src http://192.168.178.178/ubuntu bionic-updates universe

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu
## team, and may not be under a free licence. Please satisfy yourself as to
## your rights to use the software. Also, please note that software in
## multiverse WILL NOT receive any review or updates from the Ubuntu
## security team.
deb [arch=amd64] http://192.168.178.178/ubuntu bionic multiverse
# deb-src http://192.168.178.178/ubuntu bionic multiverse
deb [arch=amd64] http://192.168.178.178/ubuntu bionic-updates multiverse
# deb-src http://192.168.178.178/ubuntu bionic-updates multiverse

## N.B. software from this repository may not have been tested as
## extensively as that contained in the main release, although it includes
## newer versions of some applications which may provide useful features.
## Also, please note that software in backports WILL NOT receive any review
## or updates from the Ubuntu security team.
deb [arch=amd64] http://192.168.178.178/ubuntu bionic-backports main restricted universe multiverse
# deb-src http://192.168.178.178/ubuntu bionic-backports main restricted universe multiverse

## Uncomment the following two lines to add software from Canonical's
## 'partner' repository.
## This software is not part of Ubuntu, but is offered by Canonical and the
## respective vendors as a service to Ubuntu users.
# deb [arch=amd64] http://archive.canonical.com/ubuntu bionic partner
# deb-src http://archive.canonical.com/ubuntu bionic partner

deb [arch=amd64] http://192.168.178.178/ubuntu bionic-security main restricted
# deb-src http://192.168.178.178/ubuntu bionic-security main restricted
deb [arch=amd64] http://192.168.178.178/ubuntu bionic-security universe
# deb-src http://192.168.178.178/ubuntu bionic-security universe
deb [arch=amd64] http://192.168.178.178/ubuntu bionic-security multiverse
# deb-src http://192.168.178.178/ubuntu bionic-security multiverse
EOP
) > /etc/apt/sources.list
#-------------------------------
#export DEBIAN_FRONTEND=nointeractive
#apt-get update
#apt-get upgrade -y
sed -i 's/^.*PermitRootLogin.*$/PermitRootLogin yes/' /etc/ssh/sshd_config
cd /root && wget http://192.168.178.178/u18.04.1-server-amd64/change_ip.sh
chmod +x /root/change_ip.sh
/root/change_ip.sh
